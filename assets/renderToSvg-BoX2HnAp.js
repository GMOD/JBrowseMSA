import{o as f,R as t,w,_ as x,u as v,c as S,r as _,a as k,b as y}from"./index-CjVncjkL.js";const W=f(({model:e})=>{const{scrollX:n,msaAreaWidth:r,minimapHeight:a,colWidth:l,numColumns:i}=e,c=12,o=a-12,s=r/i/l,m=-n,p=m+r,u=m*s,d=p*s,h="rgba(66, 119, 127, 0.3)";return t.createElement(t.Fragment,null,t.createElement("rect",{x:0,y:0,width:r,height:c,stroke:"#555",fill:"none"}),t.createElement("rect",{x:Math.max(0,u),y:0,width:d-u,height:c,fill:h,stroke:"#555"}),t.createElement("g",{transform:`translate(0 ${c})`},t.createElement("polygon",{fill:h,points:[[d,0],[u,0],[0,o],[r,o]].toString()})))});async function O(e,n){await w(()=>!!e.dataInitialized);const{width:r,height:a,scrollX:l,scrollY:i}=e,{exportType:c,theme:o,includeMinimap:s}=n;if(c==="entire")return E({width:e.totalWidth+e.treeAreaWidth,height:e.totalHeight,theme:o,model:e,offsetY:0,offsetX:0,includeMinimap:s});if(c==="viewport")return E({width:r,height:a,theme:o,model:e,offsetY:i,offsetX:-l,includeMinimap:s});throw new Error("unknown export type")}async function E({width:e,height:n,offsetX:r,offsetY:a,theme:l,model:i,includeMinimap:c}){const{Context:o}=await x(async()=>{const{Context:m}=await import("./svgcanvas-erg4PVEl.js").then(p=>p.s);return{Context:m}},[],import.meta.url),s=c?M:I;return v.renderToStaticMarkup(t.createElement(T,{width:e,height:n},t.createElement(s,{model:i},t.createElement(H,{Context:o,model:i,theme:l,offsetX:r,offsetY:a,width:e,height:n}))))}function H({model:e,theme:n,width:r,height:a,offsetX:l,offsetY:i,Context:c}){const o="tree",{treeAreaWidth:m,colorScheme:p}=e,u=S(p,n),d=c(r,a),h=c(r,a);_({ctx:h,offsetX:l,offsetY:i,model:e,blockSizeYOverride:a,highResScaleFactorOverride:1});const g=r-m;return k({model:e,offsetY:i,ctx:d,theme:n,blockSizeYOverride:a,highResScaleFactorOverride:1}),y({model:e,theme:n,offsetY:i,offsetX:l,contrastScheme:u,ctx:h,blockSizeXOverride:g,blockSizeYOverride:a,highResScaleFactorOverride:1}),t.createElement(t.Fragment,null,t.createElement("defs",null,t.createElement("clipPath",{id:o},t.createElement("rect",{x:0,y:0,width:m,height:a}))),t.createElement("defs",null,t.createElement("clipPath",{id:"msa"},t.createElement("rect",{x:0,y:0,width:g,height:a}))),t.createElement("g",{clipPath:`url(#${o})`,dangerouslySetInnerHTML:{__html:d.getSvg().innerHTML}}),t.createElement("g",{clipPath:"url(#msa)",transform:`translate(${m} 0)`,dangerouslySetInnerHTML:{__html:h.getSvg().innerHTML}}))}function M({model:e,children:n}){const{minimapHeight:r,treeAreaWidth:a}=e;return t.createElement(t.Fragment,null,t.createElement("g",{transform:`translate(${a} 0)`},t.createElement(W,{model:e})),t.createElement("g",{transform:`translate(0 ${r})`},n))}function T({width:e,height:n,children:r}){return t.createElement("svg",{width:e,height:n,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,e,n].toString()},r)}function I({children:e}){return e}export{O as renderToSvg};
//# sourceMappingURL=renderToSvg-BoX2HnAp.js.map
